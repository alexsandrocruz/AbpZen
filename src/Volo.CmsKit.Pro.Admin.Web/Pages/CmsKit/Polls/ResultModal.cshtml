@page
@using Microsoft.AspNetCore.Mvc.Localization
@using Volo.CmsKit.Admin.Web.Pages
@using Volo.CmsKit.Pro.Admin.Web.Pages
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Modal
@using Volo.CmsKit.Localization
@using Volo.CmsKit.Pro.Admin.Web.Pages.CmsKit.Polls

@inherits AdminPageBase

@model ResultModal

@{
    Layout = null;
}


<abp-modal size="@(AbpModalSize.Large)">
    <abp-modal-header title="@L["Result"].Value"></abp-modal-header>
    <abp-modal-body>
        <abp-input asp-for="Id" />
        <span class="p-3">@Model.ViewModel.Question</span>
        <div class="p-3">
            @foreach (var item in @Model.ViewModel.PollResultDetails)
            {
                var percentage = item.VoteCount > 0 ? ((float)(item.VoteCount * 100) / (float) (Model.ViewModel.PollVoteCount)).ToString("0.0") : "0";
                
                <div class="mb-4">
                    <label class="form-check-label d-block text-primary">
                        @item.Text
                    </label>
                    <div class="row">
                        <div class="col pe-0">
                            <div class="progress mt-2 hide-info" style="height: 12px;">
                                <div class="progress-bar progress-bar-striped bg-primary progress-bar-animated" role="progressbar" style="width: @percentage%;" aria-valuenow="@percentage"> </div>
                            </div>
                        </div>
                        <div class="col-2 text-start ps-0">
                            <span class="badge hide-info text-primary">@(percentage + "%")</span>
                        </div>
                    </div>
                </div>
            }
            
            <small class="text-muted">
                @Model.GetVoteCountText(Model.ViewModel.PollVoteCount)
            </small>
        </div>
    </abp-modal-body>
    <abp-modal-footer buttons="@(AbpModalButtons.None)">
            <button type="submit" class="btn btn-secondary" data-bs-dismiss="modal">@L["Close"]</button>
        </abp-modal-footer>
</abp-modal>


@page
@using Volo.Abp.AspNetCore.Mvc.UI.Layout
@using Volo.Abp.AuditLogging.Web.Navigation
@using Volo.Abp.AuditLogging.Localization
@using Microsoft.AspNetCore.Mvc.Localization
@using Volo.Abp.AspNetCore.Mvc.UI.Theme.Shared.Pages.Shared.Components.AbpPageToolbar
@using Volo.Abp.AuditLogging.Web.Pages.AuditLogs
@inject IHtmlLocalizer<AuditLoggingResource> L
@model Volo.Abp.AuditLogging.Web.Pages.AuditLogs.IndexModel

@inject IPageLayout PageLayout
@{
    PageLayout.Content.Title = L["AuditLogs"].Value;
    PageLayout.Content.MenuItemName = AbpAuditLoggingMainMenuNames.GroupName;
}
@section scripts {
    <abp-script-bundle name="@typeof(IndexModel).FullName">
        <abp-script src="/client-proxies/auditLogging-proxy.js" />
        <abp-script src="/Pages/AuditLogs/index.js" />
    </abp-script-bundle>
}
@section styles {
    <abp-style-bundle name="@typeof(IndexModel).FullName">
        <abp-style src="/Pages/AuditLogs/detail.css" />
    </abp-style-bundle>
}
@section content_toolbar {
    @await Component.InvokeAsync(typeof(AbpPageToolbarViewComponent), new { pageName = typeof(IndexModel).FullName })
}
<abp-tabs>
    <abp-tab name="AuditLogging" title="@L["AuditLogs"].Value">
        <abp-card>
            <abp-card-body class="pb-lg-3">
                <form id="FilterFormId" method="post">
                    <abp-row>
                        <abp-column size-sm="_12" size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-input asp-for="@Model.StartTime" label="@L["StartDate"].Value" class="singleDatePicker" autocomplete="off"/>
                        </abp-column>
                        <abp-column size-sm="_12" size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-input asp-for="@Model.EndTime" label="@L["EndDate"].Value" class="singleDatePicker" autocomplete="off"/>
                        </abp-column>
                        <abp-column size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-input asp-for="@Model.UserName"/>
                        </abp-column>
                        <abp-column size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-input asp-for="@Model.UrlFilter" label="@L["Url"].Value"/>
                        </abp-column>
                        <abp-column size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-input asp-for="@Model.MinExecutionDuration" label="@L["MinDuration"].Value"/>
                        </abp-column>
                        <abp-column size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-input asp-for="@Model.MaxExecutionDuration" label="@L["MaxDuration"].Value"/>
                        </abp-column>
                        <abp-column size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-select asp-for="@Model.HttpMethod" />
                        </abp-column>
                        <abp-column size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-select asp-for="@Model.HttpStatusCode" />
                        </abp-column>
                        <abp-column size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-input asp-for="@Model.ApplicationName"/>
                        </abp-column>
                        <abp-column size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-input asp-for="@Model.ClientIpAddress" label="@L["IpAddress"].Value"/>
                        </abp-column>
                        <abp-column size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-input asp-for="@Model.CorrelationId"/>
                        </abp-column>
                        <abp-column size-md="_6" size-lg="_3" size-xxl="_2">
                            <abp-select asp-for="@Model.HasException"/>
                        </abp-column>
                    </abp-row>
                    
                    <abp-row class="justify-content-end">
                        <abp-column size-lg="_2" size="_6">
                            <div class="d-grid gap-2">
                                <abp-button class="mt-md-2" button-type="Outline_Primary" id="ClearFilterButton" type="button">
                                    <i aria-hidden="true"></i> @L["Clear"]
                                </abp-button>
                            </div>
                        </abp-column>
                        <abp-column size-lg="_2" size="_6">
                            <div class="d-grid gap-2">
                                <abp-button class="mt-md-2" button-type="Primary" type="submit">
                                    <i class="fa fa-search" aria-hidden="true"></i> @L["Search"]
                                </abp-button>
                            </div>
                        </abp-column>
                    </abp-row>
                </form>

            </abp-card-body>
        </abp-card>
        <abp-table  id="AuditLogsTable" class="nowrap"></abp-table>
    </abp-tab>
    <abp-tab name="EntityChanges" title="@L["EntityChanges"].Value">
        <abp-card>
            <abp-card-body class="pb-lg-3">
                <form id="EntityChangesFilterFormId" method="post">
                    <abp-row>
                        <abp-column size-sm="_12" size-md="_4" size-lg="_3" size-xxl="_3">
                            <abp-input asp-for="@Model.EntityChangeStartTime" label="@L["StartDate"].Value" class="singleDatePicker" autocomplete="off"/>
                        </abp-column>
                        <abp-column size-sm="_12" size-md="_4" size-lg="_3" size-xxl="_3">
                            <abp-input asp-for="@Model.EntityChangeEndTime" label="@L["EndDate"].Value" class="singleDatePicker" autocomplete="off"/>
                        </abp-column>
                        <abp-column size-lg="_2" size-md="_4">
                            <abp-select asp-for="@Model.EntityChangeChangeType"
                                        name="entityChangeType"
                                        label="@L["ChangeType"].Value"
                                        asp-items="@Model.EntityChangeChangeTypeList"/>
                        </abp-column>
                        <abp-column size-lg="_2" size-md="_4">
                            <abp-input asp-for="@Model.EntityId"
                                       name="entityId"
                                       label="@L["EntityId"].Value"/>
                        </abp-column>
                        <abp-column size-lg="_2" size-md="_4">
                            <abp-input asp-for="@Model.EntityChangeEntityTypeFullName"
                                       name="entityTypeFullName"
                                       label="@L["EntityTypeFullName"].Value"/>
                        </abp-column>
                    </abp-row>
                    <abp-row class="justify-content-end">
                        <abp-column size-lg="_2" size="_6">
                            <div class="d-grid gap-2">
                                <abp-button class="mt-md-2" button-type="Primary" id="ClearEntityChangeFilterButton" type="submit">
                                    <i aria-hidden="true"></i> @L["Clear"]
                                </abp-button>
                            </div>
                        </abp-column>
                        <abp-column size-lg="_2" size="_6">
                            <div class="d-grid gap-2">
                                <abp-button class="mt-md-2" button-type="Primary" type="submit">
                                    <i class="fa fa-search" aria-hidden="true"></i> @L["Search"]
                                </abp-button>
                            </div>
                        </abp-column>
                    </abp-row>
                </form>
            </abp-card-body>
        </abp-card>
        <abp-table  id="EntityChangesTable" class="nowrap"></abp-table>
    </abp-tab>
</abp-tabs>

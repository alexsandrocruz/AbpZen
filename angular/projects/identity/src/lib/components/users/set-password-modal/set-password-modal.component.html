<abp-modal [visible]="isModalVisible" (visibleChange)="visibleChange.emit($event)">
  <ng-template #abpHeader>
    <h3>
      {{ 'AbpIdentity::SetPassword' | abpLocalization }}
      @if (selected.userName) {
        - {{ selected.userName }}
      }
    </h3>
  </ng-template>

  <ng-template #abpBody>
    <form [formGroup]="form" id="PasswordForm" (ngSubmit)="setPassword()" validateOnSubmit>
      <div class="mt-2 fade-in-top">
        <div class="mb-3">
          <label class="form-label" for="new-password">{{
            'AbpIdentity::Password' | abpLocalization
          }}</label>
          <div class="input-group mb-3" validationTarget>
            <input
              [type]="fieldTextType ? 'text' : 'password'"
              id="new-password"
              class="form-control"
              aria-describedby="generate-random-password-button"
              formControlName="newPassword"
              autofocus
            />
            <button
              type="button"
              id="toggle-visiblity-button"
              class="btn btn-secondary"
              [title]="'AbpIdentity::HideShow' | abpLocalization"
              (click)="fieldTextType = !fieldTextType"
            >
              <i class="fa fa-eye{{ !fieldTextType ? '-slash' : '' }}"></i>
            </button>
            <button
              style="border-top-right-radius: 0.5rem; border-bottom-right-radius: 0.5rem"
              type="button"
              id="generate-random-password-button"
              class="btn btn-success"
              ngbTooltip="{{ 'AbpIdentity::GenerateRandomPasswordTooltip' | abpLocalization }}"
              (click)="generatePassword()"
            >
              <i class="fa fa-refresh" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </form>
  </ng-template>
  <ng-template #abpFooter>
    <button type="button" class="btn btn-outline-primary" abpClose>
      {{ 'AbpIdentity::Cancel' | abpLocalization }}
    </button>
    <abp-button class="m-0" iconClass="fa fa-check" buttonType="submit" formName="PasswordForm">{{
      'AbpIdentity::Save' | abpLocalization
    }}</abp-button>
  </ng-template>
</abp-modal>
